import{u as m,r as c,j as o}from"./index-DHadUPOb.js";import{a as F,b as d}from"./index-D0MkBcLG.js";const y=({isFollowed:S=!1,userId:t,followers:r=[],onFollow:g,onError:s})=>{const{user:e}=m(),[w,f]=c.useState(!1),[a,n]=c.useState({isFollowing:!1});c.useEffect(()=>{const i=localStorage.getItem(`follow_${t}`);if(i){n({isFollowing:JSON.parse(i)});return}if(!e)return;const l=Array.isArray(r)&&r.includes(e._id);n({isFollowing:l}),localStorage.setItem(`follow_${t}`,JSON.stringify(l))},[e,t]);const u=async i=>{if(i.stopPropagation(),!e){s==null||s("Please login to follow users");return}try{f(!0),await g();const l=!a.isFollowing;n({isFollowing:l}),localStorage.setItem(`follow_${t}`,JSON.stringify(l))}catch(l){console.error("Error following user:",l),s==null||s("Failed to follow user")}finally{f(!1)}};return o.jsx("div",{children:o.jsxs("button",{onClick:u,disabled:w,className:`action-button cursor-pointer flex items-center gap-1 btn-sm hover:scale-105 transition-all duration-300 ${a.isFollowing?"bg-gray-200":""}`,children:[a.isFollowing?"Unfollow":"Follow",w?o.jsx("span",{className:"like-loader"}):a.isFollowing?o.jsx(F,{className:"ml-1"}):o.jsx(d,{className:"ml-1"})]})})};export{y as default};
