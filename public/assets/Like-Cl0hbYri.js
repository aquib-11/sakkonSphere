import{u as p,r as c,j as a,X as f}from"./index-DHadUPOb.js";const y=({totalLikes:n=0,id:k,likes:i=[],onLike:o,onError:e})=>{const{user:s}=p(),[r,d]=c.useState(!1),[l,u]=c.useState({isLiked:Array.isArray(i)&&i.includes(s==null?void 0:s._id),count:0});c.useEffect(()=>{s&&u({isLiked:Array.isArray(i)&&i.includes(s._id),count:n})},[n,s]);const m=async x=>{if(x.stopPropagation(),!s){e==null||e("Please login to like posts");return}try{d(!0),await o(),u(t=>({isLiked:!t.isLiked,count:t.isLiked?t.count-1:t.count+1}))}catch(t){console.error("Error liking post:",t),e==null||e("Failed to like post")}finally{d(!1)}};return a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm sm:text-base mr-1",children:l.count}),a.jsx("button",{type:"submit",className:"bg-transparent border-none cursor-pointer",onClick:m,disabled:r,children:a.jsx(f,{className:`${l.isLiked&&"text-red-700"} cursor-pointer size-3 sm:size-5`})})]})};export{y as default};
